<form [formGroup]="userForm" (submit)="userFormSubmitted()">
  <input type="hidden" formControlName="id" name="id" />
  <div class="field-container contains-preloader" [class]="userForm.get('userName')?.invalid && (userForm.get('userName')?.touched || userForm.get('userName')?.dirty) ? 'error': ''">
    <label for="userName">User name</label>
    <input type="text" formControlName="userName" minlength="3" id="userName" [disabled]="disableFormFields" />
    <div class="preloader" *ngIf="showPreloader">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">
        <path fill="#000000" stroke="#000000" stroke-width="5" transform-origin="center"
          d="m148 84.7 13.8-8-10-17.3-13.8 8a50 50 0 0 0-27.4-15.9v-16h-20v16A50 50 0 0 0 63 67.4l-13.8-8-10 17.3 13.8 8a50 50 0 0 0 0 31.7l-13.8 8 10 17.3 13.8-8a50 50 0 0 0 27.5 15.9v16h20v-16a50 50 0 0 0 27.4-15.9l13.8 8 10-17.3-13.8-8a50 50 0 0 0 0-31.7Zm-47.5 50.8a35 35 0 1 1 0-70 35 35 0 0 1 0 70Z">
          <animateTransform type="rotate" attributeName="transform" calcMode="spline" dur="2" values="0;120" keyTimes="0;1"
            keySplines="0 0 1 1" repeatCount="indefinite"></animateTransform>
        </path>
      </svg>
    </div>
    <div
      *ngIf="userForm.get('userName')?.invalid && (userForm.get('userName')?.touched || userForm.get('userName')?.dirty)" class="error">
      <div *ngIf="userForm.get('userName')?.errors?.['required']">
        User name is required.
      </div>
      <div *ngIf="userForm.get('userName')?.errors?.['minlength']">
        User name must be at least 3 characters long.
      </div>
      <div *ngIf="userForm.get('userName')?.errors?.['userNameTaken']">
        User name already exists.
      </div>
    </div>
  </div>
  <div class="field-container">
    <label for="active">Active</label>
    <input type="checkbox" formControlName="active" id="active" [disabled]="disableFormFields"/>
  </div>
  <div class="field-container">
    <button [disabled]="!userForm.valid || disableFormSubmit">
      <span *ngIf="!componentData?.userName">Insert</span>
      <span *ngIf="componentData?.userName">Edit</span>
    </button>
  </div>
</form>
